<!DOCTYPE html>
<html>
  <head>
    <link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Droid+Serif' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Sorts+Mill+Goudy' rel='stylesheet' type='text/css'>
    <link rel='stylesheet' type='text/css' media='screen' href='./bekk/style.css' />

    <title>Invoking Some Dynamics</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script src="https://github.com/downloads/gnab/remark/remark-0.3.5.min.js" type="text/javascript"></script>
    <style type="text/css" media="screen">
      /* Slideshow styles */
    </style>
  </head>
  <body>
    <textarea id="source">




.center.middle
# Invoking Some Dynamics

__Scala &amp; JVM__

[@miss_haugen](http://twitter.com/miss_haugen) | [@rflob](http://twitter.com/rflob)



---
.center.middle
#invokedynamic

----

ny bytecode-instruksjon


---

.center.middle

Hvorfor lurer vi på dette?





---
.center.middle
# invokevirtual

----

vanlig metodekall på et objekt

---


# invokevirtual


    public static void main(String ... args) {
        KillerApp app = new InsaneApp();
        String text = app.getAwesomeText(1);
    }

----


    NEW InsaneApp
    DUP
    INVOKESPECIAL InsaneApp.&lt;init&gt;()V
    ASTORE 1

    ALOAD 1
    ICONST_1
    INVOKEVIRTUAL KillerApp.getAwesomeText(I)Ljava/lang/String;
    ASTORE 2

---

.center.middle

Hva er utfordringen med dynamisk typede språk på JVM?

---

# invokevirtual

    INVOKEVIRTUAL KillerApp.getAwesomeText(I)Ljava/lang/String;

Bytekoden må vite om:

- objektets klasse (referansetypen)
- metodenavn
- antall argumenter og klassene deres
- returtype (?)


---

# invokevirtual

    INVOKEVIRTUAL KillerApp.getAwesomeText(I)Ljava/lang/String;

JVM stoler ikke på kompilert kode!

- sjekker at metode faktisk er definert av den statiske typen til mottakerobjektet



---
.center.middle
#invokedynamic

----

Tam-tara-taaaa!


---

# invokedynamic

Bytekode må vite om

- objectreferanse
- metodenavn
- parameter bundle

---

# invokedynamic

Eksempelkode



---

# Kritikk?


---
.center.middle
# Oracle Is Everyones Friend!

Yes really!









    </textarea>
    <div id="slideshow"></div>
  </body>
</html>
